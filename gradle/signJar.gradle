//DEVELOPMENT ONLY

def pass = 'Danboise_1'
def storeName = 'dc-cert.jks'
def alias = 'dmi-cert'
def jarName = project.name

//def certPath = 'C:\\Users\\David\\Niagara4.6\\distech\\certManagement'
//def storePath = 'C:\\Users\\David\\Niagara4.6\\distech\\certManagement'
//def jarPath = 'c:\\niagara\\ec-net4-4.6.96.28\\modules'

def certPath = 'C:\\Users\\David\\Niagara4.6\\tridium\\certManagement'
def storePath = 'C:\\Users\\David\\Niagara4.6\\tridium\\certManagement'
def jarPath = 'C:\\JCI\\FXWorkbench-14.6\\modules'

task signJar(type:Exec){
    commandLine 'jarsigner',
            '-keystore', storePath.concat('\\'+storeName),
            '-storepass', pass,
            jarPath.concat('\\'+jarName+'.jar'),
            alias
}

//task runStation(type:Exec){
//  workingDir = '../../../../../../../../JCI/FXWorkbench-14.6/bin'
//  commandLine 'station', station
//  ignoreExitValue = true
//}

//task makeKeystore(type:Exec){
////  workingDir '../../../../../../../../JCI/FXWorkbench-14.6/jre/bin'
////  commandLine 'keytool',
////          '-genkey',
////          '-alias', alias,
////          '-keyAlg', 'RSA',
////          '-ext', 'EKU=\"codeSigning\"',
////          '-validity', '600',
////          '-keypass', pass,
////          '-storepass', pass,
////          '-keystore', storePath.concat('\\'+storeName),
////          '-dname', 'CN=Vitek, OU=Controls, O=Danboise Mechanical, L=Farmington, ST=Michigan, C=US'
////}

//task exportCert(type:Exec){
//  workingDir '../../../../../../../../JCI/FXWorkbench-14.6/jre/bin'
//  commandLine 'keytool',
//          '-export',
//          '-keystore', storePath.concat('\\'+storeName),
//          '-alias', alias,
//          '-file', certPath+'\\'+alias+'.cer',
//          '-rfc'
//}
